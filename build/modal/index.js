!function(){"use strict";var e,t={6770:function(){var e=window.wp.blocks;function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function l(e,l,r){return(l=function(e){var l=function(e){if("object"!=t(e)||!e)return e;var l=e[Symbol.toPrimitive];if(void 0!==l){var r=l.call(e,"string");if("object"!=t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(l)?l:l+""}(l))in e?Object.defineProperty(e,l,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[l]=r,e}function r(e){var t,l,o="";if("string"==typeof e||"number"==typeof e)o+=e;else if("object"==typeof e)if(Array.isArray(e)){var n=e.length;for(t=0;t<n;t++)e[t]&&(l=r(e[t]))&&(o&&(o+=" "),o+=l)}else for(l in e)e[l]&&(o&&(o+=" "),o+=l);return o}var o=function(){for(var e,t,l=0,o="",n=arguments.length;l<n;l++)(e=arguments[l])&&(t=r(e))&&(o&&(o+=" "),o+=t);return o},n=window.wp.i18n,a=window.wp.blockEditor,s=window.wp.element,i=window.wp.components,c=window.wp.data,d=window.wp.editor;const u=()=>(0,c.useSelect)((e=>{const t=[],l=e(a.store).getBlocks(),r=e=>{null!=e&&e.innerBlocks&&e.innerBlocks.forEach((e=>{"pulsar/modal"===e.name&&t.push(e),r(e)}))};return l.forEach((e=>{"pulsar/modal"===e.name&&t.push(e),r(e)})),t}));let p=e=>crypto.getRandomValues(new Uint8Array(e));const b=()=>((e,t=21)=>((e,t,l)=>{let r=(2<<Math.log(e.length-1)/Math.LN2)-1,o=-~(1.6*r*t/e.length);return(n=t)=>{let a="";for(;;){let t=l(o),s=0|o;for(;s--;)if(a+=e[t[s]&r]||"",a.length===n)return a}}})(e,t,p))("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",11)();var h=window.ReactJSXRuntime;i.SVG,i.Path,i.Path,i.Path,i.Path,i.Path,i.SVG,i.G,i.G,i.Path,i.Polygon,i.Rect,i.Rect,i.Polygon,i.Polygon,i.SVG,i.G,i.G,i.Path,i.Polygon,i.Rect,i.Rect,i.SVG,i.Path,i.SVG,i.Path,i.SVG,i.Path;const g=(0,h.jsxs)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:[(0,h.jsx)(i.Path,{d:"M6.4 12.1h11.2v1.5H6.4zM6.5 15.5h11.2V17H6.5z"}),(0,h.jsx)(i.Path,{d:"M23.2 4.5c0-2.1-1.7-3.7-3.7-3.7-1 0-2 .4-2.7 1.2-.3.3-.5.7-.7 1H5c-1.1 0-1.9.9-1.9 2v14c0 1.1.8 2 1.9 2h14.1c1.1 0 1.9-.9 1.9-1.9V7.9c1.3-.5 2.2-1.8 2.2-3.4zM19.5 19c0 .2-.2.4-.4.4H5c-.2 0-.4-.2-.4-.4V5c0-.2.2-.4.4-.4h10.8c0 2.1 1.7 3.7 3.7 3.7V19zm0-12.2c-1.2 0-2.2-1-2.2-2.2 0-.6.2-1.1.6-1.5.4-.5 1-.7 1.6-.7 1.2 0 2.2 1 2.2 2.2s-1 2.2-2.2 2.2z"})]});i.SVG,i.Path,i.SVG,i.Path,i.SVG,i.Path,i.Path;const m=["children"];function f(e,t){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),l.push.apply(l,r)}return l}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var _=(0,i.withNotices)((function(e){const{attributes:t,setAttributes:l,isSelected:r,clientId:p}=e,{id:f,inQueryLoop:_,label:w,width:y,overlayColor:x,enableCloseButton:j,triggerDelay:k,enableTriggerDelay:O,triggerSelector:P,dismissedDuration:C}=t,S=u();(0,s.useEffect)((()=>{const e=S.filter(((e,t,l)=>l.find((t=>t.attributes.id===e.attributes.id&&t.clientId!==e.clientId))));if(!(e.length<=1))for(let t=1;t<e.length;t++)(0,c.dispatch)("core/block-editor").updateBlockAttributes(e[t].clientId,{id:b()})}),[p,S]);const[B,M]=(0,s.useState)(!1),I=(0,a.__experimentalUseMultipleOriginColorsAndGradients)(),T=(0,c.useSelect)((e=>{const{getCurrentPostType:t}=e(d.store);return t()}),[]),D=(0,s.useRef)(null),[E,N]=(0,s.useState)(!1),G=(0,c.useSelect)((e=>{const{hasSelectedInnerBlock:t}=e(a.store);return t(p,!0)}),[p]);(0,s.useEffect)((()=>{f||l({id:b()})}),[f,l]),(0,s.useEffect)((()=>{r||G?N(!0):"wp_block"!==T||B?N(!1):(M(!0),N(!0))}),[r,G,T]);const V=()=>{N(!1)},[A]=(0,a.useSettings)("spacing.units"),H=(0,i.__experimentalUseCustomUnits)({availableUnits:A||["%","px","em","rem","vw"]}),R=Number.isFinite(y)?y+"%":y,{getBlockParentsByBlockName:U}=wp.data.select("core/block-editor");(0,s.useEffect)((()=>{const e=U(p,"core/query").length>0;l({inQueryLoop:e})}),[p,_,U,l]);const L=(0,a.useBlockProps)({className:o("wp-block-pulsar-modal",{"is-open":E}),ref:D,style:{"--modal-container-width":R||void 0,"--modal-overlay-background-color":x},"data-trigger-delay":O?k:void 0,"data-trigger-selector":P||void 0,"data-cookie-duration":C||void 0,"data-modal-id":f}),z=(0,a.useInnerBlocksProps)({className:"wp-block-pulsar-modal__container",role:"dialog","aria-modal":!0}),{children:F}=z,Z=function(e,t){if(null==e)return{};var l,r,o=function(e,t){if(null==e)return{};var l={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;l[r]=e[r]}return l}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)l=n[r],-1===t.indexOf(l)&&{}.propertyIsEnumerable.call(e,l)&&(o[l]=e[l])}return o}(z,m);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(a.InspectorControls,{children:[(0,h.jsxs)(i.PanelBody,{title:(0,n.__)("Settings","pulsar"),children:[(0,h.jsxs)("p",{className:"wp-block-pulsar-modal__editor-id",children:[(0,n.__)("Modal ID","pulsar"),": ",(0,h.jsx)("code",{children:f})]}),(0,h.jsx)(i.TextControl,{label:(0,n.__)("Modal Label","pulsar"),value:w,placeholder:(0,n.__)("New Modal","pulsar"),onChange:e=>l({label:e}),help:(0,n.__)("Used to differentiate modals from one another, and describes the modal to screen readers.","pulsar")}),(0,h.jsx)(i.__experimentalUnitControl,{label:(0,n.__)("Width"),labelPosition:"edge",__unstableInputWidth:"80px",value:y||"",onChange:e=>{e=0>parseFloat(e)?"0":e,l({width:e})},units:H}),(0,h.jsx)(i.ToggleControl,{label:(0,n.__)("Show close button","pulsar"),checked:j||!1,onChange:()=>{l({enableCloseButton:!j})}})]}),(0,h.jsxs)(i.PanelBody,{title:(0,n.__)("Triggers","pulsar"),initialOpen:!1,children:[(0,h.jsx)(i.ToggleControl,{label:(0,n.__)("Show modal on page load","pulsar"),checked:O||!1,onChange:()=>{l({enableTriggerDelay:!O})}}),O&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(i.__experimentalUnitControl,{label:(0,n.__)("Delay","pulsar"),labelPosition:"edge",__unstableInputWidth:"80px",value:k,placeholder:"0",onChange:e=>l({triggerDelay:e}),units:[{value:"ms",label:"ms",default:"",a11yLabel:(0,n.__)("Milliseconds (ms)"),step:100}]}),(0,h.jsx)(i.__experimentalUnitControl,{label:(0,n.__)("Dismissed duration","pulsar"),labelPosition:"edge",__unstableInputWidth:"80px",value:C,help:(0,n.__)("Duration before this modal will appear again after being closed. Leave blank to always show this modal.","pulsar"),placeholder:"0",onChange:e=>l({dismissedDuration:e}),units:[{value:"days",label:"d",default:"",a11yLabel:(0,n.__)("Days"),step:1},{value:"hrs",label:"h",default:"",a11yLabel:(0,n.__)("Hours"),step:1},{value:"mins",label:"min",default:"",a11yLabel:(0,n.__)("Minutes"),step:1}]})]}),(0,h.jsx)(i.TextControl,{label:(0,n.__)("Selector","pulsar"),help:(0,n.__)("Optional CSS selector to trigger the modal. Buttons and groups also have an option to trigger modals.","pulsar"),value:P,onChange:e=>l({triggerSelector:e}),style:{fontFamily:"monospace"},__nextHasNoMarginBottom:!0})]})]}),(0,h.jsx)(a.InspectorControls,{group:"color",children:(0,h.jsx)(a.__experimentalColorGradientSettingsDropdown,v({__experimentalIsRenderedInSidebar:!0,settings:[{colorValue:x,label:(0,n.__)("Overlay","pulsar"),onColorChange:e=>l({overlayColor:e}),isShownByDefault:!0,enableAlpha:!0,resetAllFilter:()=>({overlayColor:void 0})}],panelId:p},I))}),(0,h.jsx)(a.BlockControls,{group:"other",children:(0,h.jsx)(i.ToolbarGroup,{children:(0,h.jsx)(i.ToolbarButton,{onClick:()=>{N(!0)},children:(0,n.__)("Open Modal","pulsar")})})}),(0,h.jsx)("div",v(v({},L),{},{children:E?(0,h.jsx)("div",{className:"wp-block-pulsar-modal__overlay",children:(0,h.jsxs)("div",v(v({},Z),{},{children:[(0,h.jsx)(i.Popover,{variant:"toolbar",placement:"top-start",offset:10,className:"block-editor-block-popover",children:(0,h.jsx)(i.Toolbar,{label:"Options",children:(0,h.jsx)(i.ToolbarGroup,{children:(0,h.jsx)(i.ToolbarButton,{onClick:V,children:(0,n.__)("Close Modal","pulsar")})})})}),F,j&&(0,h.jsxs)("button",{className:"wp-block-pulsar-modal__close",onClick:V,children:[(0,h.jsx)("span",{className:"wp-block-pulsar-modal__close-icon"}),(0,h.jsx)("span",{className:"screen-reader-text",children:(0,n.__)("Close Modal","pulsar")})]})]}))}):(0,h.jsx)(i.Placeholder,{className:"wp-block-pulsar-modal__placeholder",icon:g,isColumnLayout:!0,children:(0,n.__)("Modal ID: ","pulsar")+f})}))]})})),w=JSON.parse('{"UU":"pulsar/modal"}'),y=window.wp.plugins,x=window.wp.editPost,j=window.wp.primitives,k=(0,h.jsx)(j.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,h.jsx)(j.Path,{d:"m19 7-3-3-8.5 8.5-1 4 4-1L19 7Zm-7 11.5H5V20h7v-1.5Z"})}),O=(0,h.jsx)(j.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,h.jsx)(j.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M12 5.5A2.25 2.25 0 0 0 9.878 7h4.244A2.251 2.251 0 0 0 12 5.5ZM12 4a3.751 3.751 0 0 0-3.675 3H5v1.5h1.27l.818 8.997a2.75 2.75 0 0 0 2.739 2.501h4.347a2.75 2.75 0 0 0 2.738-2.5L17.73 8.5H19V7h-3.325A3.751 3.751 0 0 0 12 4Zm4.224 4.5H7.776l.806 8.861a1.25 1.25 0 0 0 1.245 1.137h4.347a1.25 1.25 0 0 0 1.245-1.137l.805-8.861Z"})});(0,y.registerPlugin)("pulsar-modal",{render:function(){const e=u(),{selectBlock:t,insertBlock:l,removeBlock:r}=(0,c.useDispatch)(a.store),{openGeneralSidebar:o}=(0,c.useDispatch)(x.store);return(0,h.jsx)(d.PluginSidebar,{name:"plugin-sidebar-modal",title:(0,n.__)("Modals","pulsar"),icon:g,children:(0,h.jsxs)("div",{className:"plugin-sidebar-content",children:[e.length>0&&e.map(((e,l)=>(0,h.jsx)("div",{children:(0,h.jsx)(i.Card,{className:"pulsar-modal-block__card",isRounded:!1,size:"small",children:(0,h.jsxs)(i.CardBody,{children:[(0,h.jsx)(i.__experimentalHStack,{expanded:!0,children:(0,h.jsx)(i.__experimentalHeading,{size:4,children:e.attributes.label||(0,n.__)("New Modal","pulsar")})}),(0,h.jsxs)(i.__experimentalHStack,{expanded:!1,children:[(0,h.jsx)(i.Button,{size:"small",icon:k,label:(0,n.__)("Edit Modal","pulsar"),onClick:()=>{return l=e.clientId,t(l),void o("edit-post/block");var l}}),(0,h.jsx)(i.Button,{size:"small",icon:O,label:(0,n.__)("Remove Modal","pulsar"),onClick:()=>{return t=e.clientId,void r(t);var t}})]})]})})},l))),(0,h.jsx)(i.Button,{variant:"primary",onClick:()=>{const e=wp.blocks.createBlock("pulsar/modal",{label:(0,n.__)("New Modal","pulsar")});l(e),t(e.clientId),o("edit-post/block")},className:"pulsar-modal-block__add-button",children:(0,n.__)("Add Modal","pulsar")})]})})}});var P=window.wp.hooks,C=window.wp.compose;function S(e,t){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),l.push.apply(l,r)}return l}function B(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const M=["core/button","core/image","core/heading","core/group"],I=(0,C.createHigherOrderComponent)((e=>t=>{const{name:l,attributes:r,setAttributes:o}=t,s=u(),d=s.filter((e=>{var t;return(null==r?void 0:r.modalTriggerId)===(null==e||null===(t=e.attributes)||void 0===t?void 0:t.id)}))[0],{selectBlock:p}=(0,c.useDispatch)(a.store),b=[{label:(0,n.__)("Select Modal","pulsar"),value:""},...s.map((e=>{var t,l;return{label:(null==e||null===(t=e.attributes)||void 0===t?void 0:t.label)||(0,n.__)("New Modal","pulsar"),value:null==e||null===(l=e.attributes)||void 0===l?void 0:l.id}}))];return M.includes(l)?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(e,B({},t)),"pulsar/modal"!==l&&(0,h.jsx)(a.InspectorAdvancedControls,{children:(0,h.jsxs)(i.BaseControl,{children:[(0,h.jsx)(i.ToggleControl,{label:(0,n.__)("Show Modal on Click","pulsar"),checked:(null==r?void 0:r.modalTriggerEnabled)||!1,onChange:()=>{o({modalTriggerEnabled:!(null!=r&&r.modalTriggerEnabled)})}}),(null==r?void 0:r.modalTriggerEnabled)&&(0,h.jsx)(i.SelectControl,{label:(0,n.__)("Modal","pulsar"),value:null==r?void 0:r.modalTriggerId,options:b,onChange:e=>{o({modalTriggerId:e})}}),null!==d&&(0,h.jsx)(i.Button,{label:(0,n.__)("Edit Modal","pulsar"),variant:"secondary",onClick:()=>p(d.clientId),children:(0,n.__)("Open Modal","pulsar")})]})})]}):(0,h.jsx)(e,B({},t))}),"withInspectorControl");(0,P.addFilter)("blocks.registerBlockType","pulsar/modal-attributes",((e,t)=>(void 0!==(null==e?void 0:e.attributes)&&M.includes(t)&&(e.attributes=B(B({},e.attributes),{},{modalTriggerEnabled:{type:"boolean",default:!1},modalTriggerId:{type:"string"}})),e))),(0,P.addFilter)("editor.BlockEdit","pulsar/modal-advanced-controls",I),(0,e.registerBlockType)(w.UU,{edit:_,save:()=>(0,h.jsx)(a.InnerBlocks.Content,{}),icon:g})}},l={};function r(e){var o=l[e];if(void 0!==o)return o.exports;var n=l[e]={exports:{}};return t[e](n,n.exports,r),n.exports}r.m=t,e=[],r.O=function(t,l,o,n){if(!l){var a=1/0;for(d=0;d<e.length;d++){l=e[d][0],o=e[d][1],n=e[d][2];for(var s=!0,i=0;i<l.length;i++)(!1&n||a>=n)&&Object.keys(r.O).every((function(e){return r.O[e](l[i])}))?l.splice(i--,1):(s=!1,n<a&&(a=n));if(s){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[l,o,n]},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={483:0,251:0};r.O.j=function(t){return 0===e[t]};var t=function(t,l){var o,n,a=l[0],s=l[1],i=l[2],c=0;if(a.some((function(t){return 0!==e[t]}))){for(o in s)r.o(s,o)&&(r.m[o]=s[o]);if(i)var d=i(r)}for(t&&t(l);c<a.length;c++)n=a[c],r.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return r.O(d)},l=self.webpackChunkpulsar_blocks=self.webpackChunkpulsar_blocks||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var o=r.O(void 0,[251],(function(){return r(6770)}));o=r.O(o)}();