(()=>{"use strict";var e,l={5546:()=>{const e=window.wp.blocks;function l(e){var o,t,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e)){var r=e.length;for(o=0;o<r;o++)e[o]&&(t=l(e[o]))&&(a&&(a+=" "),a+=t)}else for(t in e)e[t]&&(a&&(a+=" "),a+=t);return a}const o=function(){for(var e,o,t=0,a="",r=arguments.length;t<r;t++)(e=arguments[t])&&(o=l(e))&&(a&&(a+=" "),a+=o);return a},t=window.wp.i18n,a=window.wp.blockEditor,r=window.wp.element,s=window.wp.components,n=window.wp.data,i=window.wp.editor,d=e=>(0,n.useSelect)((l=>{const o=[],t=l(a.store).getBlocks(),r=l=>{l?.innerBlocks&&l.innerBlocks.forEach((l=>{l.name===e&&o.push(l),r(l)}))};return t.forEach((l=>{l.name===e&&o.push(l),r(l)})),o}));let c=e=>crypto.getRandomValues(new Uint8Array(e));const u=()=>((e,l=21)=>((e,l,o)=>{let t=(2<<Math.log(e.length-1)/Math.LN2)-1,a=-~(1.6*t*l/e.length);return(r=l)=>{let s="";for(;;){let l=o(a),n=0|a;for(;n--;)if(s+=e[l[n]&t]||"",s.length===r)return s}}})(e,l,c))("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",11)(),p=window.ReactJSXRuntime,h=(s.SVG,s.Path,s.Path,s.Path,s.Path,s.Path,s.SVG,s.G,s.G,s.Path,s.Polygon,s.Rect,s.Rect,s.Polygon,s.Polygon,s.SVG,s.G,s.G,s.Path,s.Polygon,s.Rect,s.Rect,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,(0,p.jsxs)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:[(0,p.jsx)(s.Path,{d:"M6.4 12.1h11.2v1.5H6.4zM6.5 15.5h11.2V17H6.5z"}),(0,p.jsx)(s.Path,{d:"M23.2 4.5c0-2.1-1.7-3.7-3.7-3.7-1 0-2 .4-2.7 1.2-.3.3-.5.7-.7 1H5c-1.1 0-1.9.9-1.9 2v14c0 1.1.8 2 1.9 2h14.1c1.1 0 1.9-.9 1.9-1.9V7.9c1.3-.5 2.2-1.8 2.2-3.4zM19.5 19c0 .2-.2.4-.4.4H5c-.2 0-.4-.2-.4-.4V5c0-.2.2-.4.4-.4h10.8c0 2.1 1.7 3.7 3.7 3.7V19zm0-12.2c-1.2 0-2.2-1-2.2-2.2 0-.6.2-1.1.6-1.5.4-.5 1-.7 1.6-.7 1.2 0 2.2 1 2.2 2.2s-1 2.2-2.2 2.2z"})]}));s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path;const g=(0,s.withNotices)((function(e){const{attributes:l,setAttributes:c,isSelected:g,clientId:_}=e,{id:b,inQueryLoop:m,label:x,width:w,overlayColor:v,enableCloseButton:k,triggerType:j,triggerDelay:C,clickSelector:f,scrollSelector:y,scrollThreshold:S,dismissedDuration:P,disableClosing:B}=l,T=d("pulsar/modal");(0,r.useEffect)((()=>{const e=T.filter(((e,l,o)=>o.find((l=>l.attributes.id===e.attributes.id&&l.clientId!==e.clientId))));if(!(e.length<=1))for(let l=1;l<e.length;l++)(0,n.dispatch)("core/block-editor").updateBlockAttributes(e[l].clientId,{id:u()})}),[_,T]);const[M,I]=(0,r.useState)(!1),G=(0,a.__experimentalUseMultipleOriginColorsAndGradients)(),N=(0,n.useSelect)((e=>{const{getCurrentPostType:l}=e(i.store);return l()}),[]),V=(0,r.useRef)(null),[O,D]=(0,r.useState)(!1),E=(0,n.useSelect)((e=>{const{hasSelectedInnerBlock:l}=e(a.store);return l(_,!0)}),[_]);(0,r.useEffect)((()=>{b||c({id:u()})}),[b,c]),(0,r.useEffect)((()=>{g||E?D(!0):"wp_block"!==N||M?D(!1):(I(!0),D(!0))}),[g,E,N]);const H=()=>{D(!1)},[U]=(0,a.useSettings)("spacing.units"),A=(0,s.__experimentalUseCustomUnits)({availableUnits:U||["%","px","em","rem","vw"]}),L=Number.isFinite(w)?w+"%":w,{getBlockParentsByBlockName:R}=wp.data.select("core/block-editor");(0,r.useEffect)((()=>{const e=R(_,"core/query").length>0;c({inQueryLoop:e})}),[_,m,R,c]);const F=(0,a.useBlockProps)({className:o("wp-block-pulsar-modal",{"is-open":O}),ref:V,style:{"--modal-container-width":L||void 0,"--modal-overlay-background-color":v},"data-trigger-delay":"load"===j||"scroll"===j?C:void 0,"data-trigger-selector":"click"===j?f:"scroll"===j?y:void 0,"data-cookie-duration":P||void 0,"data-modal-id":b}),{children:z,...W}=(0,a.useInnerBlocksProps)({className:"wp-block-pulsar-modal__container",role:"dialog","aria-modal":!0});return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(a.InspectorControls,{children:[(0,p.jsxs)(s.PanelBody,{title:(0,t.__)("Settings","pulsar"),children:[(0,p.jsxs)("p",{className:"wp-block-pulsar-modal__editor-id",children:[(0,t.__)("Modal ID","pulsar"),": ",(0,p.jsx)("code",{children:b})]}),(0,p.jsx)(s.TextControl,{label:(0,t.__)("Modal Label","pulsar"),value:x,placeholder:(0,t.__)("New Modal","pulsar"),onChange:e=>c({label:e}),help:(0,t.__)("Used to differentiate modals from one another, and describes the modal to screen readers.","pulsar")}),(0,p.jsx)(s.ToggleControl,{label:(0,t.__)("Prevent closing","pulsar"),checked:B||!1,help:(0,t.__)("If enabled, the modal will not be closable by clicking the close button or by clicking outside the modal. Use with caution.","pulsar"),onChange:()=>{c({disableClosing:!B,enableCloseButton:!1})}}),(0,p.jsx)(s.ToggleControl,{label:(0,t.__)("Show close button","pulsar"),checked:k||!1,onChange:()=>{c({enableCloseButton:!k})}}),(0,p.jsx)(s.__experimentalUnitControl,{label:(0,t.__)("Width"),labelPosition:"edge",__unstableInputWidth:"80px",value:w||"",onChange:e=>{e=0>parseFloat(e)?"0":e,c({width:e})},units:A}),(0,p.jsx)(s.__experimentalUnitControl,{label:(0,t.__)("Dismissed duration","pulsar"),labelPosition:"edge",__unstableInputWidth:"80px",value:P,help:(0,t.__)("Duration before this modal will appear again after being closed. Leave blank to always show this modal.","pulsar"),placeholder:"0",onChange:e=>c({dismissedDuration:e}),units:[{value:"days",label:"d",default:"",a11yLabel:(0,t.__)("Days"),step:1},{value:"hrs",label:"h",default:"",a11yLabel:(0,t.__)("Hours"),step:1},{value:"mins",label:"min",default:"",a11yLabel:(0,t.__)("Minutes"),step:1}]})]}),(0,p.jsxs)(s.PanelBody,{title:(0,t.__)("Triggers","pulsar"),initialOpen:!1,children:[(0,p.jsxs)(s.__experimentalToggleGroupControl,{label:(0,t.__)("Trigger type","pulsar"),value:j,onChange:e=>c({triggerType:e}),isBlock:!0,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,children:[(0,p.jsx)(s.__experimentalToggleGroupControlOption,{value:"click",label:"Click"}),(0,p.jsx)(s.__experimentalToggleGroupControlOption,{value:"load",label:"Load"}),(0,p.jsx)(s.__experimentalToggleGroupControlOption,{value:"scroll",label:"Scroll"})]}),"scroll"===j&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(s.TextControl,{label:(0,t.__)("Selector","pulsar"),help:(0,t.__)("CSS element selector that triggers the modal when that element is scrolled into view.","pulsar"),value:y,onChange:e=>c({scrollSelector:e}),style:{fontFamily:"monospace"},__nextHasNoMarginBottom:!0}),(0,p.jsx)(s.__experimentalUnitControl,{label:(0,t.__)("Scroll threshold","pulsar"),units:[{value:"%",label:"%",default:10,a11yLabel:(0,t.__)("Percentage"),step:10}],min:0,max:100,labelPosition:"edge",__unstableInputWidth:"80px",value:S,onChange:e=>c({scrollThreshold:e})})]}),("load"===j||"scroll"===j)&&(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(s.__experimentalUnitControl,{label:(0,t.__)("Delay","pulsar"),labelPosition:"edge",__unstableInputWidth:"80px",value:C,placeholder:"0",onChange:e=>c({triggerDelay:e}),units:[{value:"ms",label:"ms",default:"",a11yLabel:(0,t.__)("Milliseconds (ms)"),step:100}]})}),"click"===j&&(0,p.jsx)(s.TextControl,{label:(0,t.__)("Selector","pulsar"),help:(0,t.__)("Optional CSS selector to trigger the modal. Buttons and groups also have an option to trigger modals.","pulsar"),value:f,onChange:e=>c({clickSelector:e}),style:{fontFamily:"monospace"},__nextHasNoMarginBottom:!0})]})]}),(0,p.jsx)(a.InspectorControls,{group:"color",children:(0,p.jsx)(a.__experimentalColorGradientSettingsDropdown,{__experimentalIsRenderedInSidebar:!0,settings:[{colorValue:v,label:(0,t.__)("Overlay","pulsar"),onColorChange:e=>c({overlayColor:e}),isShownByDefault:!0,enableAlpha:!0,resetAllFilter:()=>({overlayColor:void 0})}],panelId:_,...G})}),(0,p.jsx)(a.BlockControls,{group:"other",children:(0,p.jsx)(s.ToolbarGroup,{children:(0,p.jsx)(s.ToolbarButton,{onClick:()=>{D(!0)},children:(0,t.__)("Open Modal","pulsar")})})}),(0,p.jsx)("div",{...F,children:O?(0,p.jsx)("div",{className:"wp-block-pulsar-modal__overlay",children:(0,p.jsxs)("div",{...W,children:[(0,p.jsx)(s.Popover,{variant:"toolbar",placement:"top-start",offset:10,className:"block-editor-block-popover",children:(0,p.jsx)(s.Toolbar,{label:"Options",children:(0,p.jsx)(s.ToolbarGroup,{children:(0,p.jsx)(s.ToolbarButton,{onClick:H,children:(0,t.__)("Close Modal","pulsar")})})})}),z,k&&(0,p.jsxs)("button",{className:"wp-block-pulsar-modal__close",onClick:H,children:[(0,p.jsx)("span",{className:"wp-block-pulsar-modal__close-icon"}),(0,p.jsx)("span",{className:"screen-reader-text",children:(0,t.__)("Close Modal","pulsar")})]})]})}):(0,p.jsx)(s.Placeholder,{className:"wp-block-pulsar-modal__placeholder",icon:h,isColumnLayout:!0,children:(0,t.__)("Modal ID: ","pulsar")+b})})]})})),_=JSON.parse('{"UU":"pulsar/modal"}'),b=window.wp.plugins,m=window.wp.editPost,x=window.wp.primitives,w=(0,p.jsx)(x.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,p.jsx)(x.Path,{d:"m19 7-3-3-8.5 8.5-1 4 4-1L19 7Zm-7 11.5H5V20h7v-1.5Z"})}),v=(0,p.jsx)(x.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,p.jsx)(x.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M12 5.5A2.25 2.25 0 0 0 9.878 7h4.244A2.251 2.251 0 0 0 12 5.5ZM12 4a3.751 3.751 0 0 0-3.675 3H5v1.5h1.27l.818 8.997a2.75 2.75 0 0 0 2.739 2.501h4.347a2.75 2.75 0 0 0 2.738-2.5L17.73 8.5H19V7h-3.325A3.751 3.751 0 0 0 12 4Zm4.224 4.5H7.776l.806 8.861a1.25 1.25 0 0 0 1.245 1.137h4.347a1.25 1.25 0 0 0 1.245-1.137l.805-8.861Z"})});(0,b.registerPlugin)("pulsar-modal",{render:function(){const e=d("pulsar/modal"),{selectBlock:l,insertBlock:o,removeBlock:r}=(0,n.useDispatch)(a.store),{openGeneralSidebar:c}=(0,n.useDispatch)(m.store);return(0,p.jsx)(i.PluginSidebar,{name:"plugin-sidebar-modal",title:(0,t.__)("Modals","pulsar"),icon:h,children:(0,p.jsxs)("div",{className:"plugin-sidebar-content",children:[e.length>0&&e.map(((e,o)=>(0,p.jsx)("div",{children:(0,p.jsx)(s.Card,{className:"pulsar-modal-block__card",isRounded:!1,size:"small",children:(0,p.jsxs)(s.CardBody,{children:[(0,p.jsx)(s.__experimentalHStack,{expanded:!0,children:(0,p.jsx)(s.__experimentalHeading,{size:4,children:e.attributes.label||(0,t.__)("New Modal","pulsar")})}),(0,p.jsxs)(s.__experimentalHStack,{expanded:!1,children:[(0,p.jsx)(s.Button,{size:"small",icon:w,label:(0,t.__)("Edit Modal","pulsar"),onClick:()=>{return o=e.clientId,l(o),void c("edit-post/block");var o}}),(0,p.jsx)(s.Button,{size:"small",icon:v,label:(0,t.__)("Remove Modal","pulsar"),onClick:()=>{return l=e.clientId,void r(l);var l}})]})]})})},o))),(0,p.jsx)(s.Button,{variant:"primary",onClick:()=>{const e=wp.blocks.createBlock("pulsar/modal",{label:(0,t.__)("New Modal","pulsar")});o(e),l(e.clientId),c("edit-post/block")},className:"pulsar-modal-block__add-button",children:(0,t.__)("Add Modal","pulsar")})]})})}});const k=window.wp.hooks,j=window.wp.compose,C=["core/button","core/image","core/heading","core/group"],f=(0,j.createHigherOrderComponent)((e=>l=>{const{name:o,attributes:r,setAttributes:i}=l,c=d("pulsar/modal"),u=c.filter((e=>r?.modalTriggerId===e?.attributes?.id))[0],{selectBlock:h}=(0,n.useDispatch)(a.store),g=[{label:(0,t.__)("Select Modal","pulsar"),value:""},...c.map((e=>({label:e?.attributes?.label||(0,t.__)("New Modal","pulsar"),value:e?.attributes?.id})))];return C.includes(o)?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(e,{...l}),"pulsar/modal"!==o&&(0,p.jsx)(a.InspectorAdvancedControls,{children:(0,p.jsxs)(s.BaseControl,{children:[(0,p.jsx)(s.ToggleControl,{label:(0,t.__)("Show Modal on Click","pulsar"),checked:r?.modalTriggerEnabled||!1,onChange:()=>{i({modalTriggerEnabled:!r?.modalTriggerEnabled})}}),r?.modalTriggerEnabled&&(0,p.jsx)(s.SelectControl,{label:(0,t.__)("Modal","pulsar"),value:r?.modalTriggerId,options:g,onChange:e=>{i({modalTriggerId:e})}}),null!==u&&(0,p.jsx)(s.Button,{label:(0,t.__)("Edit Modal","pulsar"),variant:"secondary",onClick:()=>h(u.clientId),children:(0,t.__)("Open Modal","pulsar")})]})})]}):(0,p.jsx)(e,{...l})}),"withInspectorControl");(0,k.addFilter)("blocks.registerBlockType","pulsar/modal-attributes",((e,l)=>(void 0!==e?.attributes&&C.includes(l)&&(e.attributes={...e.attributes,modalTriggerEnabled:{type:"boolean",default:!1},modalTriggerId:{type:"string"}}),e))),(0,k.addFilter)("editor.BlockEdit","pulsar/modal-advanced-controls",f),(0,e.registerBlockType)(_.UU,{edit:g,save:()=>(0,p.jsx)(a.InnerBlocks.Content,{}),icon:h,deprecated:[{attributes:{triggerSelector:{type:"string"},enableTriggerDelay:{type:"boolean",default:!1}},migrate:e=>({clickSelector:e.triggerSelector})}]})}},o={};function t(e){var a=o[e];if(void 0!==a)return a.exports;var r=o[e]={exports:{}};return l[e](r,r.exports,t),r.exports}t.m=l,e=[],t.O=(l,o,a,r)=>{if(!o){var s=1/0;for(c=0;c<e.length;c++){for(var[o,a,r]=e[c],n=!0,i=0;i<o.length;i++)(!1&r||s>=r)&&Object.keys(t.O).every((e=>t.O[e](o[i])))?o.splice(i--,1):(n=!1,r<s&&(s=r));if(n){e.splice(c--,1);var d=a();void 0!==d&&(l=d)}}return l}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[o,a,r]},t.o=(e,l)=>Object.prototype.hasOwnProperty.call(e,l),(()=>{var e={483:0,251:0};t.O.j=l=>0===e[l];var l=(l,o)=>{var a,r,[s,n,i]=o,d=0;if(s.some((l=>0!==e[l]))){for(a in n)t.o(n,a)&&(t.m[a]=n[a]);if(i)var c=i(t)}for(l&&l(o);d<s.length;d++)r=s[d],t.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return t.O(c)},o=globalThis.webpackChunkpulsar_blocks=globalThis.webpackChunkpulsar_blocks||[];o.forEach(l.bind(null,0)),o.push=l.bind(null,o.push.bind(o))})();var a=t.O(void 0,[251],(()=>t(5546)));a=t.O(a)})();