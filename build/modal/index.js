!function(){"use strict";var e,l={7458:function(){var e=window.wp.blocks;function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function t(e,t,o){return(t=function(e){var t=function(e){if("object"!=l(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,"string");if("object"!=l(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function o(e){var l,t,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var n=e.length;for(l=0;l<n;l++)e[l]&&(t=o(e[l]))&&(r&&(r+=" "),r+=t)}else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}var r=function(){for(var e,l,t=0,r="",n=arguments.length;t<n;t++)(e=arguments[t])&&(l=o(e))&&(r&&(r+=" "),r+=l);return r},n=window.wp.i18n,a=window.wp.blockEditor,s=window.wp.element,i=window.wp.components,c=window.wp.data,d=window.wp.editor;const u=()=>(0,c.useSelect)((e=>{const l=[],t=e(a.store).getBlocks(),o=e=>{null!=e&&e.innerBlocks&&e.innerBlocks.forEach((e=>{"pulsar/modal"===e.name&&l.push(e),o(e)}))};return t.forEach((e=>{"pulsar/modal"===e.name&&l.push(e),o(e)})),l}));let p=e=>crypto.getRandomValues(new Uint8Array(e));const b=()=>((e,l=21)=>((e,l,t)=>{let o=(2<<Math.log(e.length-1)/Math.LN2)-1,r=-~(1.6*o*l/e.length);return(n=l)=>{let a="";for(;;){let l=t(r),s=0|r;for(;s--;)if(a+=e[l[s]&o]||"",a.length===n)return a}}})(e,l,p))("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",11)();var h=window.ReactJSXRuntime;i.SVG,i.Path,i.Path,i.Path,i.Path,i.Path,i.SVG,i.G,i.G,i.Path,i.Polygon,i.Rect,i.Rect,i.Polygon,i.Polygon,i.SVG,i.G,i.G,i.Path,i.Polygon,i.Rect,i.Rect,i.SVG,i.Path,i.SVG,i.Path,i.SVG,i.Path;const g=(0,h.jsxs)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:[(0,h.jsx)(i.Path,{d:"M6.4 12.1h11.2v1.5H6.4zM6.5 15.5h11.2V17H6.5z"}),(0,h.jsx)(i.Path,{d:"M23.2 4.5c0-2.1-1.7-3.7-3.7-3.7-1 0-2 .4-2.7 1.2-.3.3-.5.7-.7 1H5c-1.1 0-1.9.9-1.9 2v14c0 1.1.8 2 1.9 2h14.1c1.1 0 1.9-.9 1.9-1.9V7.9c1.3-.5 2.2-1.8 2.2-3.4zM19.5 19c0 .2-.2.4-.4.4H5c-.2 0-.4-.2-.4-.4V5c0-.2.2-.4.4-.4h10.8c0 2.1 1.7 3.7 3.7 3.7V19zm0-12.2c-1.2 0-2.2-1-2.2-2.2 0-.6.2-1.1.6-1.5.4-.5 1-.7 1.6-.7 1.2 0 2.2 1 2.2 2.2s-1 2.2-2.2 2.2z"})]});i.SVG,i.Path,i.SVG,i.Path,i.SVG,i.Path,i.Path;const m=["children"];function _(e,l){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);l&&(o=o.filter((function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable}))),t.push.apply(t,o)}return t}function f(e){for(var l=1;l<arguments.length;l++){var o=null!=arguments[l]?arguments[l]:{};l%2?_(Object(o),!0).forEach((function(l){t(e,l,o[l])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):_(Object(o)).forEach((function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(o,l))}))}return e}var v=(0,i.withNotices)((function(e){const{attributes:l,setAttributes:t,isSelected:o,clientId:p}=e,{id:_,inQueryLoop:v,label:x,width:w,overlayColor:y,enableCloseButton:j,triggerType:k,triggerDelay:C,clickSelector:O,scrollSelector:S,scrollThreshold:P,dismissedDuration:B,disableClosing:T}=l,M=u();(0,s.useEffect)((()=>{const e=M.filter(((e,l,t)=>t.find((l=>l.attributes.id===e.attributes.id&&l.clientId!==e.clientId))));if(!(e.length<=1))for(let l=1;l<e.length;l++)(0,c.dispatch)("core/block-editor").updateBlockAttributes(e[l].clientId,{id:b()})}),[p,M]);const[I,D]=(0,s.useState)(!1),G=(0,a.__experimentalUseMultipleOriginColorsAndGradients)(),N=(0,c.useSelect)((e=>{const{getCurrentPostType:l}=e(d.store);return l()}),[]),E=(0,s.useRef)(null),[V,H]=(0,s.useState)(!1),U=(0,c.useSelect)((e=>{const{hasSelectedInnerBlock:l}=e(a.store);return l(p,!0)}),[p]);(0,s.useEffect)((()=>{_||t({id:b()})}),[_,t]),(0,s.useEffect)((()=>{o||U?H(!0):"wp_block"!==N||I?H(!1):(D(!0),H(!0))}),[o,U,N]);const A=()=>{H(!1)},[L]=(0,a.useSettings)("spacing.units"),R=(0,i.__experimentalUseCustomUnits)({availableUnits:L||["%","px","em","rem","vw"]}),F=Number.isFinite(w)?w+"%":w,{getBlockParentsByBlockName:z}=wp.data.select("core/block-editor");(0,s.useEffect)((()=>{const e=z(p,"core/query").length>0;t({inQueryLoop:e})}),[p,v,z,t]);const W=(0,a.useBlockProps)({className:r("wp-block-pulsar-modal",{"is-open":V}),ref:E,style:{"--modal-container-width":F||void 0,"--modal-overlay-background-color":y},"data-trigger-delay":"load"===k||"scroll"===k?C:void 0,"data-trigger-selector":"click"===k?O:"scroll"===k?S:void 0,"data-cookie-duration":B||void 0,"data-modal-id":_}),Z=(0,a.useInnerBlocksProps)({className:"wp-block-pulsar-modal__container",role:"dialog","aria-modal":!0}),{children:J}=Z,Q=function(e,l){if(null==e)return{};var t,o,r=function(e,l){if(null==e)return{};var t={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(-1!==l.indexOf(o))continue;t[o]=e[o]}return t}(e,l);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(o=0;o<n.length;o++)t=n[o],-1===l.indexOf(t)&&{}.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}(Z,m);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(a.InspectorControls,{children:[(0,h.jsxs)(i.PanelBody,{title:(0,n.__)("Settings","pulsar"),children:[(0,h.jsxs)("p",{className:"wp-block-pulsar-modal__editor-id",children:[(0,n.__)("Modal ID","pulsar"),": ",(0,h.jsx)("code",{children:_})]}),(0,h.jsx)(i.TextControl,{label:(0,n.__)("Modal Label","pulsar"),value:x,placeholder:(0,n.__)("New Modal","pulsar"),onChange:e=>t({label:e}),help:(0,n.__)("Used to differentiate modals from one another, and describes the modal to screen readers.","pulsar")}),(0,h.jsx)(i.ToggleControl,{label:(0,n.__)("Prevent closing","pulsar"),checked:T||!1,help:(0,n.__)("If enabled, the modal will not be closable by clicking the close button or by clicking outside the modal. Use with caution.","pulsar"),onChange:()=>{t({disableClosing:!T,enableCloseButton:!1})}}),(0,h.jsx)(i.ToggleControl,{label:(0,n.__)("Show close button","pulsar"),checked:j||!1,onChange:()=>{t({enableCloseButton:!j})}}),(0,h.jsx)(i.__experimentalUnitControl,{label:(0,n.__)("Width"),labelPosition:"edge",__unstableInputWidth:"80px",value:w||"",onChange:e=>{e=0>parseFloat(e)?"0":e,t({width:e})},units:R}),(0,h.jsx)(i.__experimentalUnitControl,{label:(0,n.__)("Dismissed duration","pulsar"),labelPosition:"edge",__unstableInputWidth:"80px",value:B,help:(0,n.__)("Duration before this modal will appear again after being closed. Leave blank to always show this modal.","pulsar"),placeholder:"0",onChange:e=>t({dismissedDuration:e}),units:[{value:"days",label:"d",default:"",a11yLabel:(0,n.__)("Days"),step:1},{value:"hrs",label:"h",default:"",a11yLabel:(0,n.__)("Hours"),step:1},{value:"mins",label:"min",default:"",a11yLabel:(0,n.__)("Minutes"),step:1}]})]}),(0,h.jsxs)(i.PanelBody,{title:(0,n.__)("Triggers","pulsar"),initialOpen:!1,children:[(0,h.jsxs)(i.__experimentalToggleGroupControl,{label:(0,n.__)("Trigger type","pulsar"),value:k,onChange:e=>t({triggerType:e}),isBlock:!0,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,children:[(0,h.jsx)(i.__experimentalToggleGroupControlOption,{value:"click",label:"Click"}),(0,h.jsx)(i.__experimentalToggleGroupControlOption,{value:"load",label:"Load"}),(0,h.jsx)(i.__experimentalToggleGroupControlOption,{value:"scroll",label:"Scroll"})]}),"scroll"===k&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(i.TextControl,{label:(0,n.__)("Selector","pulsar"),help:(0,n.__)("CSS element selector that triggers the modal when that element is scrolled into view.","pulsar"),value:S,onChange:e=>t({scrollSelector:e}),style:{fontFamily:"monospace"},__nextHasNoMarginBottom:!0}),(0,h.jsx)(i.__experimentalUnitControl,{label:(0,n.__)("Scroll threshold","pulsar"),units:[{value:"%",label:"%",default:10,a11yLabel:(0,n.__)("Percentage"),step:10}],min:0,max:100,labelPosition:"edge",__unstableInputWidth:"80px",value:P,onChange:e=>t({scrollThreshold:e})})]}),("load"===k||"scroll"===k)&&(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(i.__experimentalUnitControl,{label:(0,n.__)("Delay","pulsar"),labelPosition:"edge",__unstableInputWidth:"80px",value:C,placeholder:"0",onChange:e=>t({triggerDelay:e}),units:[{value:"ms",label:"ms",default:"",a11yLabel:(0,n.__)("Milliseconds (ms)"),step:100}]})}),"click"===k&&(0,h.jsx)(i.TextControl,{label:(0,n.__)("Selector","pulsar"),help:(0,n.__)("Optional CSS selector to trigger the modal. Buttons and groups also have an option to trigger modals.","pulsar"),value:O,onChange:e=>t({clickSelector:e}),style:{fontFamily:"monospace"},__nextHasNoMarginBottom:!0})]})]}),(0,h.jsx)(a.InspectorControls,{group:"color",children:(0,h.jsx)(a.__experimentalColorGradientSettingsDropdown,f({__experimentalIsRenderedInSidebar:!0,settings:[{colorValue:y,label:(0,n.__)("Overlay","pulsar"),onColorChange:e=>t({overlayColor:e}),isShownByDefault:!0,enableAlpha:!0,resetAllFilter:()=>({overlayColor:void 0})}],panelId:p},G))}),(0,h.jsx)(a.BlockControls,{group:"other",children:(0,h.jsx)(i.ToolbarGroup,{children:(0,h.jsx)(i.ToolbarButton,{onClick:()=>{H(!0)},children:(0,n.__)("Open Modal","pulsar")})})}),(0,h.jsx)("div",f(f({},W),{},{children:V?(0,h.jsx)("div",{className:"wp-block-pulsar-modal__overlay",children:(0,h.jsxs)("div",f(f({},Q),{},{children:[(0,h.jsx)(i.Popover,{variant:"toolbar",placement:"top-start",offset:10,className:"block-editor-block-popover",children:(0,h.jsx)(i.Toolbar,{label:"Options",children:(0,h.jsx)(i.ToolbarGroup,{children:(0,h.jsx)(i.ToolbarButton,{onClick:A,children:(0,n.__)("Close Modal","pulsar")})})})}),J,j&&(0,h.jsxs)("button",{className:"wp-block-pulsar-modal__close",onClick:A,children:[(0,h.jsx)("span",{className:"wp-block-pulsar-modal__close-icon"}),(0,h.jsx)("span",{className:"screen-reader-text",children:(0,n.__)("Close Modal","pulsar")})]})]}))}):(0,h.jsx)(i.Placeholder,{className:"wp-block-pulsar-modal__placeholder",icon:g,isColumnLayout:!0,children:(0,n.__)("Modal ID: ","pulsar")+_})}))]})})),x=JSON.parse('{"UU":"pulsar/modal"}'),w=window.wp.plugins,y=window.wp.editPost,j=window.wp.primitives,k=(0,h.jsx)(j.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,h.jsx)(j.Path,{d:"m19 7-3-3-8.5 8.5-1 4 4-1L19 7Zm-7 11.5H5V20h7v-1.5Z"})}),C=(0,h.jsx)(j.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,h.jsx)(j.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M12 5.5A2.25 2.25 0 0 0 9.878 7h4.244A2.251 2.251 0 0 0 12 5.5ZM12 4a3.751 3.751 0 0 0-3.675 3H5v1.5h1.27l.818 8.997a2.75 2.75 0 0 0 2.739 2.501h4.347a2.75 2.75 0 0 0 2.738-2.5L17.73 8.5H19V7h-3.325A3.751 3.751 0 0 0 12 4Zm4.224 4.5H7.776l.806 8.861a1.25 1.25 0 0 0 1.245 1.137h4.347a1.25 1.25 0 0 0 1.245-1.137l.805-8.861Z"})});(0,w.registerPlugin)("pulsar-modal",{render:function(){const e=u(),{selectBlock:l,insertBlock:t,removeBlock:o}=(0,c.useDispatch)(a.store),{openGeneralSidebar:r}=(0,c.useDispatch)(y.store);return(0,h.jsx)(d.PluginSidebar,{name:"plugin-sidebar-modal",title:(0,n.__)("Modals","pulsar"),icon:g,children:(0,h.jsxs)("div",{className:"plugin-sidebar-content",children:[e.length>0&&e.map(((e,t)=>(0,h.jsx)("div",{children:(0,h.jsx)(i.Card,{className:"pulsar-modal-block__card",isRounded:!1,size:"small",children:(0,h.jsxs)(i.CardBody,{children:[(0,h.jsx)(i.__experimentalHStack,{expanded:!0,children:(0,h.jsx)(i.__experimentalHeading,{size:4,children:e.attributes.label||(0,n.__)("New Modal","pulsar")})}),(0,h.jsxs)(i.__experimentalHStack,{expanded:!1,children:[(0,h.jsx)(i.Button,{size:"small",icon:k,label:(0,n.__)("Edit Modal","pulsar"),onClick:()=>{return t=e.clientId,l(t),void r("edit-post/block");var t}}),(0,h.jsx)(i.Button,{size:"small",icon:C,label:(0,n.__)("Remove Modal","pulsar"),onClick:()=>{return l=e.clientId,void o(l);var l}})]})]})})},t))),(0,h.jsx)(i.Button,{variant:"primary",onClick:()=>{const e=wp.blocks.createBlock("pulsar/modal",{label:(0,n.__)("New Modal","pulsar")});t(e),l(e.clientId),r("edit-post/block")},className:"pulsar-modal-block__add-button",children:(0,n.__)("Add Modal","pulsar")})]})})}});var O=window.wp.hooks,S=window.wp.compose;function P(e,l){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);l&&(o=o.filter((function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable}))),t.push.apply(t,o)}return t}function B(e){for(var l=1;l<arguments.length;l++){var o=null!=arguments[l]?arguments[l]:{};l%2?P(Object(o),!0).forEach((function(l){t(e,l,o[l])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):P(Object(o)).forEach((function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(o,l))}))}return e}const T=["core/button","core/image","core/heading","core/group"],M=(0,S.createHigherOrderComponent)((e=>l=>{const{name:t,attributes:o,setAttributes:r}=l,s=u(),d=s.filter((e=>{var l;return(null==o?void 0:o.modalTriggerId)===(null==e||null===(l=e.attributes)||void 0===l?void 0:l.id)}))[0],{selectBlock:p}=(0,c.useDispatch)(a.store),b=[{label:(0,n.__)("Select Modal","pulsar"),value:""},...s.map((e=>{var l,t;return{label:(null==e||null===(l=e.attributes)||void 0===l?void 0:l.label)||(0,n.__)("New Modal","pulsar"),value:null==e||null===(t=e.attributes)||void 0===t?void 0:t.id}}))];return T.includes(t)?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(e,B({},l)),"pulsar/modal"!==t&&(0,h.jsx)(a.InspectorAdvancedControls,{children:(0,h.jsxs)(i.BaseControl,{children:[(0,h.jsx)(i.ToggleControl,{label:(0,n.__)("Show Modal on Click","pulsar"),checked:(null==o?void 0:o.modalTriggerEnabled)||!1,onChange:()=>{r({modalTriggerEnabled:!(null!=o&&o.modalTriggerEnabled)})}}),(null==o?void 0:o.modalTriggerEnabled)&&(0,h.jsx)(i.SelectControl,{label:(0,n.__)("Modal","pulsar"),value:null==o?void 0:o.modalTriggerId,options:b,onChange:e=>{r({modalTriggerId:e})}}),null!==d&&(0,h.jsx)(i.Button,{label:(0,n.__)("Edit Modal","pulsar"),variant:"secondary",onClick:()=>p(d.clientId),children:(0,n.__)("Open Modal","pulsar")})]})})]}):(0,h.jsx)(e,B({},l))}),"withInspectorControl");(0,O.addFilter)("blocks.registerBlockType","pulsar/modal-attributes",((e,l)=>(void 0!==(null==e?void 0:e.attributes)&&T.includes(l)&&(e.attributes=B(B({},e.attributes),{},{modalTriggerEnabled:{type:"boolean",default:!1},modalTriggerId:{type:"string"}})),e))),(0,O.addFilter)("editor.BlockEdit","pulsar/modal-advanced-controls",M),(0,e.registerBlockType)(x.UU,{edit:v,save:()=>(0,h.jsx)(a.InnerBlocks.Content,{}),icon:g,deprecated:[{attributes:{triggerSelector:{type:"string"},enableTriggerDelay:{type:"boolean",default:!1}},migrate:e=>({clickSelector:e.triggerSelector})}]})}},t={};function o(e){var r=t[e];if(void 0!==r)return r.exports;var n=t[e]={exports:{}};return l[e](n,n.exports,o),n.exports}o.m=l,e=[],o.O=function(l,t,r,n){if(!t){var a=1/0;for(d=0;d<e.length;d++){t=e[d][0],r=e[d][1],n=e[d][2];for(var s=!0,i=0;i<t.length;i++)(!1&n||a>=n)&&Object.keys(o.O).every((function(e){return o.O[e](t[i])}))?t.splice(i--,1):(s=!1,n<a&&(a=n));if(s){e.splice(d--,1);var c=r();void 0!==c&&(l=c)}}return l}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[t,r,n]},o.o=function(e,l){return Object.prototype.hasOwnProperty.call(e,l)},function(){var e={483:0,251:0};o.O.j=function(l){return 0===e[l]};var l=function(l,t){var r,n,a=t[0],s=t[1],i=t[2],c=0;if(a.some((function(l){return 0!==e[l]}))){for(r in s)o.o(s,r)&&(o.m[r]=s[r]);if(i)var d=i(o)}for(l&&l(t);c<a.length;c++)n=a[c],o.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return o.O(d)},t=self.webpackChunkpulsar_blocks=self.webpackChunkpulsar_blocks||[];t.forEach(l.bind(null,0)),t.push=l.bind(null,t.push.bind(t))}();var r=o.O(void 0,[251],(function(){return o(7458)}));r=o.O(r)}();