import{getContext as e,getElement as n,store as t}from"@wordpress/interactivity";var o=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],a=o.join(","),r="undefined"==typeof Element,i=r?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,u=!r&&Element.prototype.getRootNode?function(e){var n;return null==e||null===(n=e.getRootNode)||void 0===n?void 0:n.call(e)}:function(e){return null==e?void 0:e.ownerDocument},s=function(e,n){var t;void 0===n&&(n=!0);var o=null==e||null===(t=e.getAttribute)||void 0===t?void 0:t.call(e,"inert");return""===o||"true"===o||n&&e&&s(e.parentNode)},c=function(e,n,t){if(s(e))return[];var o=Array.prototype.slice.apply(e.querySelectorAll(a));return n&&i.call(e,a)&&o.unshift(e),o.filter(t)},l=function(e,n,t){for(var o=[],r=Array.from(e);r.length;){var u=r.shift();if(!s(u,!1))if("SLOT"===u.tagName){var c=u.assignedElements(),d=c.length?c:u.children,p=l(d,!0,t);t.flatten?o.push.apply(o,p):o.push({scopeParent:u,candidates:p})}else{i.call(u,a)&&t.filter(u)&&(n||!e.includes(u))&&o.push(u);var f=u.shadowRoot||"function"==typeof t.getShadowRoot&&t.getShadowRoot(u),b=!s(f,!1)&&(!t.shadowRootFilter||t.shadowRootFilter(u));if(f&&b){var v=l(!0===f?u.children:f.children,!0,t);t.flatten?o.push.apply(o,v):o.push({scopeParent:u,candidates:v})}else r.unshift.apply(r,u.children)}}return o},d=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},p=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||function(e){var n,t=null==e||null===(n=e.getAttribute)||void 0===n?void 0:n.call(e,"contenteditable");return""===t||"true"===t}(e))&&!d(e)?0:e.tabIndex},f=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},b=function(e){return"INPUT"===e.tagName},v=function(e){var n=e.getBoundingClientRect(),t=n.width,o=n.height;return 0===t&&0===o},m=function(e,n){return!(n.disabled||s(n)||function(e){return b(e)&&"hidden"===e.type}(n)||function(e,n){var t=n.displayCheck,o=n.getShadowRoot;if("full-native"===t&&"checkVisibility"in e)return!e.checkVisibility({checkOpacity:!1,opacityProperty:!1,contentVisibilityAuto:!0,visibilityProperty:!0,checkVisibilityCSS:!0});if("hidden"===getComputedStyle(e).visibility)return!0;var a=i.call(e,"details>summary:first-of-type")?e.parentElement:e;if(i.call(a,"details:not([open]) *"))return!0;if(t&&"full"!==t&&"full-native"!==t&&"legacy-full"!==t){if("non-zero-area"===t)return v(e)}else{if("function"==typeof o){for(var r=e;e;){var s=e.parentElement,c=u(e);if(s&&!s.shadowRoot&&!0===o(s))return v(e);e=e.assignedSlot?e.assignedSlot:s||c===e.ownerDocument?s:c.host}e=r}if(function(e){var n,t,o,a,r=e&&u(e),i=null===(n=r)||void 0===n?void 0:n.host,s=!1;if(r&&r!==e)for(s=!!(null!==(t=i)&&void 0!==t&&null!==(o=t.ownerDocument)&&void 0!==o&&o.contains(i)||null!=e&&null!==(a=e.ownerDocument)&&void 0!==a&&a.contains(e));!s&&i;){var c,l,d;s=!(null===(l=i=null===(c=r=u(i))||void 0===c?void 0:c.host)||void 0===l||null===(d=l.ownerDocument)||void 0===d||!d.contains(i))}return s}(e))return!e.getClientRects().length;if("legacy-full"!==t)return!0}return!1}(n,e)||function(e){return"DETAILS"===e.tagName&&Array.prototype.slice.apply(e.children).some(function(e){return"SUMMARY"===e.tagName})}(n)||function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if("FIELDSET"===n.tagName&&n.disabled){for(var t=0;t<n.children.length;t++){var o=n.children.item(t);if("LEGEND"===o.tagName)return!!i.call(n,"fieldset[disabled] *")||!o.contains(e)}return!0}n=n.parentElement}return!1}(n))},h=function(e,n){return!(function(e){return function(e){return b(e)&&"radio"===e.type}(e)&&!function(e){if(!e.name)return!0;var n,t=e.form||u(e),o=function(e){return t.querySelectorAll('input[type="radio"][name="'+e+'"]')};if("undefined"!=typeof window&&void 0!==window.CSS&&"function"==typeof window.CSS.escape)n=o(window.CSS.escape(e.name));else try{n=o(e.name)}catch(e){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",e.message),!1}var a=function(e,n){for(var t=0;t<e.length;t++)if(e[t].checked&&e[t].form===n)return e[t]}(n,e.form);return!a||a===e}(e)}(n)||p(n)<0||!m(e,n))},y=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},w=function(e){var n=[],t=[];return e.forEach(function(e,o){var a=!!e.scopeParent,r=a?e.scopeParent:e,i=function(e,n){var t=p(e);return t<0&&n&&!d(e)?0:t}(r,a),u=a?w(e.candidates):r;0===i?a?n.push.apply(n,u):n.push(r):t.push({documentOrder:o,tabIndex:i,item:e,isScope:a,content:u})}),t.sort(f).reduce(function(e,n){return n.isScope?e.push.apply(e,n.content):e.push(n.content),e},[]).concat(n)},g=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return!1!==i.call(e,a)&&h(n,e)},S=o.concat("iframe").join(","),O=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return!1!==i.call(e,S)&&m(n,e)};function I(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,o=Array(n);t<n;t++)o[t]=e[t];return o}function T(e,n,t){return(n=function(e){var n=function(e,n){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,n);if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof n?n:n+""}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function E(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,o)}return t}function k(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?E(Object(t),!0).forEach(function(n){T(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):E(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var N=function(e){return"Tab"===(null==e?void 0:e.key)||9===(null==e?void 0:e.keyCode)},F=function(e){return N(e)&&!e.shiftKey},P=function(e){return N(e)&&e.shiftKey},C=function(e){return setTimeout(e,0)},D=function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),o=1;o<n;o++)t[o-1]=arguments[o];return"function"==typeof e?e.apply(void 0,t):e},M=function(e){return e.target.shadowRoot&&"function"==typeof e.composedPath?e.composedPath()[0]:e.target},x=[],R=function(e,n){var t,o=(null==n?void 0:n.document)||document,a=(null==n?void 0:n.trapStack)||x,r=k({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:F,isKeyBackward:P},n),i={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,manuallyPaused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},u=function(e,n,t){return e&&void 0!==e[n]?e[n]:r[t||n]},s=function(e,n){var t="function"==typeof(null==n?void 0:n.composedPath)?n.composedPath():void 0;return i.containerGroups.findIndex(function(n){var o=n.container,a=n.tabbableNodes;return o.contains(e)||(null==t?void 0:t.includes(o))||a.find(function(n){return n===e})})},d=function(e){var n,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.hasFallback,i=void 0!==a&&a,u=t.params,s=void 0===u?[]:u,c=r[e];if("function"==typeof c&&(c=c.apply(void 0,function(e){if(Array.isArray(e))return I(e)}(n=s)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,n){if(e){if("string"==typeof e)return I(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?I(e,n):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),!0===c&&(c=void 0),!c){if(void 0===c||!1===c)return c;throw new Error("`".concat(e,"` was specified but was not a node, or did not return a node"))}var l=c;if("string"==typeof c){try{l=o.querySelector(c)}catch(n){throw new Error("`".concat(e,'` appears to be an invalid selector; error="').concat(n.message,'"'))}if(!l&&!i)throw new Error("`".concat(e,"` as selector refers to no known node"))}return l},f=function(){var e=d("initialFocus",{hasFallback:!0});if(!1===e)return!1;if(void 0===e||e&&!O(e,r.tabbableOptions))if(s(o.activeElement)>=0)e=o.activeElement;else{var n=i.tabbableGroups[0];e=n&&n.firstTabbableNode||d("fallbackFocus")}else null===e&&(e=d("fallbackFocus"));if(!e)throw new Error("Your focus-trap needs to have at least one focusable element");return e},b=function(){if(i.containerGroups=i.containers.map(function(e){var n=function(e,n){var t;return t=(n=n||{}).getShadowRoot?l([e],n.includeContainer,{filter:h.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:y}):c(e,n.includeContainer,h.bind(null,n)),w(t)}(e,r.tabbableOptions),t=function(e,n){return(n=n||{}).getShadowRoot?l([e],n.includeContainer,{filter:m.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):c(e,n.includeContainer,m.bind(null,n))}(e,r.tabbableOptions),o=n.length>0?n[0]:void 0,a=n.length>0?n[n.length-1]:void 0,i=t.find(function(e){return g(e)}),u=t.slice().reverse().find(function(e){return g(e)}),s=!!n.find(function(e){return p(e)>0});return{container:e,tabbableNodes:n,focusableNodes:t,posTabIndexesFound:s,firstTabbableNode:o,lastTabbableNode:a,firstDomTabbableNode:i,lastDomTabbableNode:u,nextTabbableNode:function(e){var o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=n.indexOf(e);return a<0?o?t.slice(t.indexOf(e)+1).find(function(e){return g(e)}):t.slice(0,t.indexOf(e)).reverse().find(function(e){return g(e)}):n[a+(o?1:-1)]}}}),i.tabbableGroups=i.containerGroups.filter(function(e){return e.tabbableNodes.length>0}),i.tabbableGroups.length<=0&&!d("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(i.containerGroups.find(function(e){return e.posTabIndexesFound})&&i.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},v=function(e){var n=e.activeElement;if(n)return n.shadowRoot&&null!==n.shadowRoot.activeElement?v(n.shadowRoot):n},S=function(e){!1!==e&&e!==v(document)&&(e&&e.focus?(e.focus({preventScroll:!!r.preventScroll}),i.mostRecentlyFocusedNode=e,function(e){return e.tagName&&"input"===e.tagName.toLowerCase()&&"function"==typeof e.select}(e)&&e.select()):S(f()))},T=function(e){var n=d("setReturnFocus",{params:[e]});return n||!1!==n&&e},E=function(e){var n=e.target,t=e.event,o=e.isBackward,a=void 0!==o&&o;n=n||M(t),b();var u=null;if(i.tabbableGroups.length>0){var c=s(n,t),l=c>=0?i.containerGroups[c]:void 0;if(c<0)u=a?i.tabbableGroups[i.tabbableGroups.length-1].lastTabbableNode:i.tabbableGroups[0].firstTabbableNode;else if(a){var f=i.tabbableGroups.findIndex(function(e){var t=e.firstTabbableNode;return n===t});if(f<0&&(l.container===n||O(n,r.tabbableOptions)&&!g(n,r.tabbableOptions)&&!l.nextTabbableNode(n,!1))&&(f=c),f>=0){var v=0===f?i.tabbableGroups.length-1:f-1,m=i.tabbableGroups[v];u=p(n)>=0?m.lastTabbableNode:m.lastDomTabbableNode}else N(t)||(u=l.nextTabbableNode(n,!1))}else{var h=i.tabbableGroups.findIndex(function(e){var t=e.lastTabbableNode;return n===t});if(h<0&&(l.container===n||O(n,r.tabbableOptions)&&!g(n,r.tabbableOptions)&&!l.nextTabbableNode(n))&&(h=c),h>=0){var y=h===i.tabbableGroups.length-1?0:h+1,w=i.tabbableGroups[y];u=p(n)>=0?w.firstTabbableNode:w.firstDomTabbableNode}else N(t)||(u=l.nextTabbableNode(n))}}else u=d("fallbackFocus");return u},R=function(e){var n=M(e);s(n,e)>=0||(D(r.clickOutsideDeactivates,e)?t.deactivate({returnFocus:r.returnFocusOnDeactivate}):D(r.allowOutsideClick,e)||e.preventDefault())},A=function(e){var n=M(e),t=s(n,e)>=0;if(t||n instanceof Document)t&&(i.mostRecentlyFocusedNode=n);else{var o;e.stopImmediatePropagation();var a=!0;if(i.mostRecentlyFocusedNode)if(p(i.mostRecentlyFocusedNode)>0){var u=s(i.mostRecentlyFocusedNode),c=i.containerGroups[u].tabbableNodes;if(c.length>0){var l=c.findIndex(function(e){return e===i.mostRecentlyFocusedNode});l>=0&&(r.isKeyForward(i.recentNavEvent)?l+1<c.length&&(o=c[l+1],a=!1):l-1>=0&&(o=c[l-1],a=!1))}}else i.containerGroups.some(function(e){return e.tabbableNodes.some(function(e){return p(e)>0})})||(a=!1);else a=!1;a&&(o=E({target:i.mostRecentlyFocusedNode,isBackward:r.isKeyBackward(i.recentNavEvent)})),S(o||i.mostRecentlyFocusedNode||f())}i.recentNavEvent=void 0},L=function(e){(r.isKeyForward(e)||r.isKeyBackward(e))&&function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];i.recentNavEvent=e;var t=E({event:e,isBackward:n});t&&(N(e)&&e.preventDefault(),S(t))}(e,r.isKeyBackward(e))},G=function(e){var n;"Escape"!==(null==(n=e)?void 0:n.key)&&"Esc"!==(null==n?void 0:n.key)&&27!==(null==n?void 0:n.keyCode)||!1===D(r.escapeDeactivates,e)||(e.preventDefault(),t.deactivate())},_=function(e){var n=M(e);s(n,e)>=0||D(r.clickOutsideDeactivates,e)||D(r.allowOutsideClick,e)||(e.preventDefault(),e.stopImmediatePropagation())},j=function(){if(i.active)return function(e,n){if(e.length>0){var t=e[e.length-1];t!==n&&t._setPausedState(!0)}var o=e.indexOf(n);-1===o||e.splice(o,1),e.push(n)}(a,t),i.delayInitialFocusTimer=r.delayInitialFocus?C(function(){S(f())}):S(f()),o.addEventListener("focusin",A,!0),o.addEventListener("mousedown",R,{capture:!0,passive:!1}),o.addEventListener("touchstart",R,{capture:!0,passive:!1}),o.addEventListener("click",_,{capture:!0,passive:!1}),o.addEventListener("keydown",L,{capture:!0,passive:!1}),o.addEventListener("keydown",G),t},B=function(){if(i.active)return o.removeEventListener("focusin",A,!0),o.removeEventListener("mousedown",R,!0),o.removeEventListener("touchstart",R,!0),o.removeEventListener("click",_,!0),o.removeEventListener("keydown",L,!0),o.removeEventListener("keydown",G),t},q="undefined"!=typeof window&&"MutationObserver"in window?new MutationObserver(function(e){e.some(function(e){return Array.from(e.removedNodes).some(function(e){return e===i.mostRecentlyFocusedNode})})&&S(f())}):void 0,K=function(){q&&(q.disconnect(),i.active&&!i.paused&&i.containers.map(function(e){q.observe(e,{subtree:!0,childList:!0})}))};return t={get active(){return i.active},get paused(){return i.paused},activate:function(e){if(i.active)return this;var n=u(e,"onActivate"),t=u(e,"onPostActivate"),a=u(e,"checkCanFocusTrap");a||b(),i.active=!0,i.paused=!1,i.nodeFocusedBeforeActivation=v(o),null==n||n();var r=function(){a&&b(),j(),K(),null==t||t()};return a?(a(i.containers.concat()).then(r,r),this):(r(),this)},deactivate:function(e){if(!i.active)return this;var n=k({onDeactivate:r.onDeactivate,onPostDeactivate:r.onPostDeactivate,checkCanReturnFocus:r.checkCanReturnFocus},e);clearTimeout(i.delayInitialFocusTimer),i.delayInitialFocusTimer=void 0,B(),i.active=!1,i.paused=!1,K(),function(e,n){var t=e.indexOf(n);-1!==t&&e.splice(t,1),e.length>0&&!e[e.length-1]._isManuallyPaused()&&e[e.length-1]._setPausedState(!1)}(a,t);var o=u(n,"onDeactivate"),s=u(n,"onPostDeactivate"),c=u(n,"checkCanReturnFocus"),l=u(n,"returnFocus","returnFocusOnDeactivate");null==o||o();var d=function(){C(function(){l&&S(T(i.nodeFocusedBeforeActivation)),null==s||s()})};return l&&c?(c(T(i.nodeFocusedBeforeActivation)).then(d,d),this):(d(),this)},pause:function(e){return i.active?(i.manuallyPaused=!0,this._setPausedState(!0,e)):this},unpause:function(e){return i.active?(i.manuallyPaused=!1,a[a.length-1]!==this?this:this._setPausedState(!1,e)):this},updateContainerElements:function(e){var n=[].concat(e).filter(Boolean);return i.containers=n.map(function(e){return"string"==typeof e?o.querySelector(e):e}),i.active&&b(),K(),this}},Object.defineProperties(t,{_isManuallyPaused:{value:function(){return i.manuallyPaused}},_setPausedState:{value:function(e,n){if(i.paused===e)return this;if(i.paused=e,e){var t=u(n,"onPause"),o=u(n,"onPostPause");null==t||t(),B(),K(),null==o||o()}else{var a=u(n,"onUnpause"),r=u(n,"onPostUnpause");null==a||a(),b(),j(),K(),null==r||r()}return this}}}),t.updateContainerElements(e),t};const A=(e,n)=>{(e=>{if(!e)return!1;const n=window.getComputedStyle(e);return"none"!==n.display&&"hidden"!==n.visibility&&"0"!==n.opacity})(e)?n.activate():requestAnimationFrame(()=>A(e,n))};t("pulsar/menu",{state:{isLoading:!0,isTouchEnabled:!1,activeMenuId:null,menuInstances:{}},actions:{toggleMenuOnClick:()=>{const{state:o}=t("pulsar/menu"),a=e(),{ref:r}=n();if(!a.isMenuOpen&&o.activeMenuId&&o.activeMenuId!==a.menuId){const e=o.menuInstances[o.activeMenuId];e&&(e.isMenuOpen=!1,e.menuTrap&&e.menuTrap.deactivate(),e.openSubmenus=[])}if(a.isMenuOpen=!a.isMenuOpen,document.documentElement.classList.toggle("has-open-menu",a.isMenuOpen),a.isMenuOpen)if(o.activeMenuId=a.menuId,o.menuInstances[a.menuId]=a,a.menuTrap)A(r.closest(".wp-block-pulsar-menu").querySelector(".wp-block-pulsar-menu__container"),a.menuTrap);else{const e=r.closest(".wp-block-pulsar-menu").querySelector(".wp-block-pulsar-menu__container");e&&(a.menuTrap=R(e,{allowOutsideClick:!0,escapeDeactivates:!0,returnFocusOnDeactivate:!0,onDeactivate:()=>{a.isMenuOpen=!1,a.openSubmenus=[],o.activeMenuId===a.menuId&&(o.activeMenuId=null,delete o.menuInstances[a.menuId]),document.documentElement.classList.remove("has-open-menu")},initialFocus:e.querySelector(".wp-block-pulsar-menu__close"),fallbackFocus:e}),A(e,a.menuTrap))}else a.menuTrap&&a.menuTrap.deactivate(),Object.keys(a.submenuTraps).forEach(e=>{a.submenuTraps[e]&&(a.submenuTraps[e].deactivate(),delete a.submenuTraps[e])}),a.openSubmenus=[],o.activeMenuId===a.menuId&&(o.activeMenuId=null,delete o.menuInstances[a.menuId])},openMenuOnClick:()=>{const{state:n}=t("pulsar/menu"),o=e();if(n.activeMenuId&&n.activeMenuId!==o.menuId){const e=n.menuInstances[n.activeMenuId];e&&(e.isMenuOpen=!1,e.menuTrap&&e.menuTrap.deactivate(),e.openSubmenus=[])}o.isMenuOpen=!0,n.activeMenuId=o.menuId,n.menuInstances[o.menuId]=o,document.documentElement.classList.add("has-open-menu")},closeMenuOnClick:()=>{const{state:n}=t("pulsar/menu"),o=e();o.menuTrap&&o.menuTrap.deactivate(),o.isMenuOpen=!1,o.openSubmenus=[],n.activeMenuId===o.menuId&&(n.activeMenuId=null,delete n.menuInstances[o.menuId]),document.documentElement.classList.remove("has-open-menu")},toggleSubmenuOnClick:()=>{const t=e(),o=t.submenuId,a=[...t.openSubmenus];if(a.includes(o)){const e=a.indexOf(o);-1!==e&&(t.submenuTraps[o]&&(t.submenuTraps[o].deactivate(),delete t.submenuTraps[o]),a.splice(e,1))}else if(a.push(o),t.isCollapsed){const{ref:e}=n(),a=e.closest(".wp-block-pulsar-menu__item").querySelector(".wp-block-pulsar-menu__submenu");a&&!t.submenuTraps[o]&&(t.submenuTraps[o]=R(a,{allowOutsideClick:!0,escapeDeactivates:!0,returnFocusOnDeactivate:!0,onDeactivate:()=>{const e=t.openSubmenus.indexOf(o);-1!==e&&t.openSubmenus.splice(e,1)}}),A(a,t.submenuTraps[o]))}t.openSubmenus=a},openSubmenuOnClick:()=>{const n=e(),t=n.submenuId,o=[...n.openSubmenus];o.push(t),n.openSubmenus=o},closeSubmenuOnClick:()=>{const n=e(),t=n.submenuId,o=[...n.openSubmenus],a=o.indexOf(t);-1!==a&&(n.submenuTraps[t]&&(n.submenuTraps[t].deactivate(),delete n.submenuTraps[t]),o.splice(a,1),n.openSubmenus=o)},openSubmenuOnHover:()=>{const{state:n}=t("pulsar/menu"),o=e();if(o.isCollapsed||n.isTouchEnabled)return;const a=[...o.openSubmenus];a.push(o.submenuId),o.openSubmenus=a},closeSubmenuOnHover:()=>{const{state:n}=t("pulsar/menu"),o=e();if(o.isCollapsed||n.isTouchEnabled)return;const a=[...o.openSubmenus],r=a.indexOf(o.submenuId);-1!==r&&(a.splice(r,1),o.openSubmenus=a)},handleKeydown:t=>{const o=e(),{ref:a}=n();if(!o.isCollapsed&&"Escape"===t.key){const e=a.closest(".wp-block-pulsar-menu__item");if(e){const n=parseInt(e.dataset.wpContext.match(/\d+/)[0],10);if(o.openSubmenus.includes(n)){const t=[...o.openSubmenus],a=t.indexOf(n);if(-1!==a){t.splice(a,1),o.openSubmenus=t;const n=e.querySelector(".wp-block-pulsar-menu__submenu-toggle");n&&n.focus()}}}}}},callbacks:{isLoading:()=>{const{state:e}=t("pulsar/menu");e.isLoading=!1},isCollapsed:()=>{const t=e(),{ref:o}=n(),a=o.classList.contains("collapses-always"),r=o.dataset.breakpoint,i=window.matchMedia(`(min-width: ${r}px)`);t.isCollapsed=a||!a&&!i.matches},isTouchEnabled:()=>{const{state:e}=t("pulsar/menu"),n="ontouchstart"in window||window.navigator.maxTouchPoints>0||window.navigator.msMaxTouchPoints>0;return e.isTouchEnabled=n,n},isAriaHidden:()=>{const n=e();return!n.isMenuOpen&&n.isCollapsed},isSubmenuOpen:()=>{const n=e();return n.openSubmenus.includes(n.submenuId)}}});