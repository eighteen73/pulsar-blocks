(()=>{"use strict";var e,t={976:()=>{const e=window.wp.blocks,t=window.wp.blockEditor,l=window.wp.components,s=window.wp.data,o=window.wp.element,n=window.wp.i18n,a=window.wp.compose,i=window.ReactJSXRuntime,r=(0,a.compose)([(0,s.withSelect)((e,t)=>({innerBlocks:e("core/block-editor").getBlock(t.clientId).innerBlocks})),(0,s.withDispatch)((t,l)=>({onClick(s){const o=(0,e.createBlock)(l.allowedBlock);t("core/block-editor").insertBlock(o,l.innerBlocks.length,l.clientId).then(()=>{s()})}}))])(({onClick:e,onClickAfter:t,clientId:s,allowedBlock:o,innerBlocks:n,isEnabled:a=!0,...r})=>{if(a)return(0,i.jsx)(l.Button,{onClick:()=>e(t),...r})});let c=e=>crypto.getRandomValues(new Uint8Array(e));const p=()=>((e,t=21)=>((e,t,l)=>{let s=(2<<Math.log2(e.length-1))-1,o=-~(1.6*s*t/e.length);return(n=t)=>{let a="";for(;;){let t=l(o),i=0|o;for(;i--;)if(a+=e[t[i]&s]||"",a.length>=n)return a}}})(e,0|t,c))("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",11)();function d({clientId:e,isActiveTab:l,tabNumber:o,setActiveTab:n}){const{isTabBlockSelected:a,title:r}=(0,s.useSelect)(l=>{const{getBlock:s,hasSelectedInnerBlock:o,isBlockSelected:n}=l(t.store);return{isTabBlockSelected:n(e)||o(e,!0),title:s(e).attributes.title}},[e]),{updateBlockAttributes:c}=(0,s.useDispatch)(t.store);return(0,i.jsx)("button",{className:"wp-block-pulsar-tabs__tab",id:`tab-${o}`,type:"button",role:"tab","aria-selected":a||l,"aria-controls":`tabpanel-${o}`,tabIndex:a||l?void 0:"-1",onClick:n,children:(0,i.jsx)(t.RichText,{tagName:"span",value:r,allowedFormats:[],onChange:t=>c(e,{title:t}),placeholder:`Tab ${o}`})})}function u({attributes:{id:e,activeTab:a,tabsCount:c,isVertical:u,inQueryLoop:b,collapses:h,collapsesOn:k,deepLinking:g,deepLinkingUpdateHistory:f},clientId:m,setAttributes:w,isSelected:v}){const{getBlockParentsByBlockName:x}=(0,s.useSelect)(e=>({getBlockParentsByBlockName:e(t.store).getBlockParentsByBlockName}),[]),y=(B="pulsar/tabs",(0,s.useSelect)(e=>{const l=[],s=e(t.store).getBlocks(),o=e=>{e?.innerBlocks&&e.innerBlocks.forEach(e=>{e.name===B&&l.push(e),o(e)})};return s.forEach(e=>{e.name===B&&l.push(e),o(e)}),l}));var B;(0,o.useEffect)(()=>{(e=>{const t=e.filter((e,t,l)=>l.find(t=>t.attributes.id===e.attributes.id&&t.clientId!==e.clientId));if(!(t.length<=1))for(let e=1;e<t.length;e++)(0,s.dispatch)("core/block-editor").updateBlockAttributes(t[e].clientId,{id:p()})})(y)},[m,y]),(0,o.useEffect)(()=>{e||w({id:p()})},[e,w]),(0,o.useEffect)(()=>{const e=x(m,"core/query").length>0;w({inQueryLoop:e})},[m,b,x,w]);const _=(0,t.useBlockProps)({className:u?"is-vertical":"is-horizontal"}),{children:S,...C}=(0,t.useInnerBlocksProps)(_,{orientation:"horizontal",renderAppender:!1}),{hasTabSelected:T,tabBlocks:j}=(0,s.useSelect)(e=>{const{getBlocks:l,hasSelectedInnerBlock:s}=e(t.store);return{tabBlocks:l(m),hasTabSelected:s(m,!0)}},[m]),{__unstableMarkNextChangeAsNotPersistent:P}=(0,s.useDispatch)(t.store);(0,o.useEffect)(()=>{j.length<a&&(P(),w({activeTab:1})),j.length!==c&&(P(),w({tabsCount:j.length}))},[a,w,j,c,P]);const I={sm:(0,n.__)("Mobile screens."),md:(0,n.__)("Landscape mobiles and below."),lg:(0,n.__)("Tablets in portrait mode and below."),xl:(0,n.__)("Smaller laptops or tablets in landscape mode and below.")};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.InspectorControls,{children:(0,i.jsxs)(l.PanelBody,{title:(0,n.__)("Settings","pulsar-blocks"),children:[(0,i.jsx)(l.ToggleControl,{label:(0,n.__)("Vertical","pulsar-blocks"),help:(0,n.__)("Display tabs vertically.","pulsar-blocks"),checked:u,onChange:e=>w({isVertical:e})}),(0,i.jsx)(l.ToggleControl,{label:(0,n.__)("Collapse","pulsar-blocks"),help:(0,n.__)("Collapse tabs on smaller screens.","pulsar-blocks"),checked:h,onChange:e=>w({collapses:e})}),h&&(0,i.jsx)(l.__experimentalToggleGroupControl,{label:(0,n.__)("Collapse up to"),onChange:e=>{w({collapsesOn:e})},value:k,isBlock:!0,help:(G=k,I[G]),style:{width:"100%"},children:["sm","md","lg","xl"].map(e=>(0,i.jsx)(l.__experimentalToggleGroupControlOption,{value:e,label:e.toUpperCase()},e))}),(0,i.jsx)(l.ToggleControl,{label:(0,n.__)("Deep Linking","pulsar-blocks"),help:(0,n.__)("Enable deep linking.","pulsar-blocks"),checked:g,onChange:e=>w({deepLinking:e})}),g&&(0,i.jsx)(l.ToggleControl,{label:(0,n.__)("Update History","pulsar-blocks"),help:(0,n.__)("Update history on deep linking. If enabled, the URL will be updated when the tab is changed.","pulsar-blocks"),checked:f,onChange:e=>w({deepLinkingUpdateHistory:e})})]})}),(0,i.jsxs)("div",{...C,children:[(0,i.jsx)("div",{className:"wp-block-pulsar-tabs__list",role:"tablist",children:j.map((e,t)=>{const l=t+1;return(0,i.jsx)(d,{clientId:e.clientId,isActiveTab:!T&&a===l,tabNumber:l,setActiveTab:w.bind(null,{activeTab:l})},e.clientId)})}),S,(0,i.jsx)(r,{onClickAfter:()=>{},variant:"secondary",text:(0,n.__)("Add tab","pulsar-blocks"),allowedBlock:"pulsar/tab",style:{width:"100%",justifyContent:"center"},clientId:m,isEnabled:v||T})]})]});var G}function b({clientId:a}){const r=(0,t.useBlockProps)(),[c,p]=(0,o.useState)(2),{title:d,icon:u}=(0,t.useBlockDisplayInformation)(a),{replaceInnerBlocks:b}=(0,s.useDispatch)(t.store);return(0,i.jsx)("div",{...r,children:(0,i.jsx)(l.Placeholder,{label:d,icon:(0,i.jsx)(t.BlockIcon,{icon:u,showColors:!0}),instructions:(0,n.__)("Insert tabs to organise content.","pulsar-blocks"),children:(0,i.jsxs)("form",{onSubmit:function(t){t.preventDefault(),b(a,(0,e.createBlocksFromInnerBlocksTemplate)(function(e){const t=[];for(let l=0;l<e;l++)t.push(["pulsar/tab"]);return t}(c)),!0)},children:[(0,i.jsx)(l.TextControl,{__next40pxDefaultSize:!0,type:"number",label:(0,n.__)("Tabs count","pulsar-blocks"),min:"1",value:c,onChange:p}),(0,i.jsx)(l.Button,{__next40pxDefaultSize:!0,variant:"primary",type:"submit",children:(0,n.__)("Create Tabs","pulsar-blocks")})]})})})}const h=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"pulsar/tabs","version":"1.0.0","title":"Tabs","category":"widgets","icon":"welcome-widgets-menus","description":"Organise content using tabs.","example":{},"allowedBlocks":["pulsar/tab"],"attributes":{"id":{"type":"string"},"tabsCount":{"type":"number"},"activeTab":{"type":"number","default":1},"templateLock":{"type":["string","boolean"],"enum":["all","insert","contentOnly",false]},"isVertical":{"type":"boolean","default":false},"inQueryLoop":{"type":"boolean","default":false},"collapses":{"type":"boolean","default":false},"collapsesOn":{"type":"string","default":"sm"},"deepLinking":{"type":"boolean","default":false},"deepLinkingUpdateHistory":{"type":"boolean","default":false}},"usesContext":["postId","postType","queryId"],"providesContext":{"tabs/id":"id","tabs/activeTab":"activeTab"},"supports":{"anchor":true,"align":["wide","full"],"html":false,"interactivity":true},"variations":[{"name":"two-tabs","title":"Tabs","isDefault":true,"scope":["inserter"],"innerBlocks":[["pulsar/tab"],["pulsar/tab"]]}],"textdomain":"pulsar-blocks","editorScript":"file:./index.js","editorStyle":"file:./index.css","style":"file:./style-index.css","viewScript":"file:./view.js","render":"file:./render.php"}'),k=(l.SVG,l.Path,l.Path,l.Path,l.Path,l.Path,l.SVG,l.G,l.G,l.Path,l.Polygon,l.Rect,l.Rect,l.Polygon,l.Polygon,l.SVG,l.G,l.G,l.Path,l.Polygon,l.Rect,l.Rect,l.SVG,l.Path,l.SVG,l.Path,l.SVG,l.Path,l.SVG,l.Path,l.Path,l.SVG,l.Path,(0,i.jsx)(l.SVG,{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",children:(0,i.jsx)(l.Path,{d:"M212.31-140Q182-140 161-161q-21-21-21-51.31v-535.38Q140-778 161-799q21-21 51.31-21h535.38Q778-820 799-799q21 21 21 51.31v535.38Q820-182 799-161q-21 21-51.31 21H212.31Zm0-60h535.38q4.62 0 8.46-3.85 3.85-3.84 3.85-8.46v-280H200v280q0 4.62 3.85 8.46 3.84 3.85 8.46 3.85ZM680-640q17 0 28.5-11.5T720-680q0-17-11.5-28.5T680-720H520q-17 0-28.5 11.5T480-680q0 17 11.5 28.5T520-640h160Z"})}));l.SVG,l.Path,l.Path,l.SVG,l.Path,l.SVG,l.Path,l.SVG,l.Path,(0,e.registerBlockType)(h.name,{...h,edit:function(e){const l=(0,s.useSelect)(l=>l(t.store).getBlocks(e.clientId).length>0,[e.clientId])?u:b;return(0,i.jsx)(l,{...e})},save:()=>(0,i.jsx)(t.InnerBlocks.Content,{}),icon:k})}},l={};function s(e){var o=l[e];if(void 0!==o)return o.exports;var n=l[e]={exports:{}};return t[e](n,n.exports,s),n.exports}s.m=t,e=[],s.O=(t,l,o,n)=>{if(!l){var a=1/0;for(p=0;p<e.length;p++){for(var[l,o,n]=e[p],i=!0,r=0;r<l.length;r++)(!1&n||a>=n)&&Object.keys(s.O).every(e=>s.O[e](l[r]))?l.splice(r--,1):(i=!1,n<a&&(a=n));if(i){e.splice(p--,1);var c=o();void 0!==c&&(t=c)}}return t}n=n||0;for(var p=e.length;p>0&&e[p-1][2]>n;p--)e[p]=e[p-1];e[p]=[l,o,n]},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={534:0,186:0};s.O.j=t=>0===e[t];var t=(t,l)=>{var o,n,[a,i,r]=l,c=0;if(a.some(t=>0!==e[t])){for(o in i)s.o(i,o)&&(s.m[o]=i[o]);if(r)var p=r(s)}for(t&&t(l);c<a.length;c++)n=a[c],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(p)},l=globalThis.webpackChunkpulsar_blocks=globalThis.webpackChunkpulsar_blocks||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))})();var o=s.O(void 0,[186],()=>s(976));o=s.O(o)})();