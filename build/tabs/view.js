(()=>{"use strict";class t{constructor(t){this.tablistNode=t,this.tabs=[],this.firstTab=null,this.lastTab=null,this.tabs=Array.from(this.tablistNode.querySelectorAll("[role=tab]")),this.tabpanels=[],this.selectNode=this.tablistNode.querySelector(".wp-block-pulsar-tabs__select");for(let t=0;t<this.tabs.length;t+=1){const e=this.tabs[t],s=document.getElementById(e.getAttribute("aria-controls"));this.tabpanels.push(s),e.addEventListener("keydown",this.onKeydown.bind(this)),e.addEventListener("click",this.onClick.bind(this)),this.firstTab||(this.firstTab=e),this.lastTab=e}this.selectNode&&this.selectNode.addEventListener("change",this.onSelectChange.bind(this))}setSelectedTab(t,e){"boolean"!=typeof e&&(e=!0);let s=null;for(let a=0;a<this.tabs.length;a+=1){const i=this.tabs[a];if(t===i){i.setAttribute("aria-selected","true"),i.removeAttribute("tabindex"),this.tabpanels[a].removeAttribute("hidden");const t=i.id.match(/-tab-(\d+)$/);t&&(s=t[1]),e&&i.focus()}else i.setAttribute("aria-selected","false"),i.tabIndex=-1,this.tabpanels[a].setAttribute("hidden",!0)}this.selectNode&&s&&(this.selectNode.value=s)}setSelectedToPreviousTab(t){let e;t===this.firstTab?this.setSelectedTab(this.lastTab):(e=this.tabs.indexOf(t),this.setSelectedTab(this.tabs[e-1]))}setSelectedToNextTab(t){let e;t===this.lastTab?this.setSelectedTab(this.firstTab):(e=this.tabs.indexOf(t),this.setSelectedTab(this.tabs[e+1]))}getTabByNumber(t){return this.tabs.find((e=>{const s=e.id.match(/-tab-(\d+)$/);return s&&s[1]===String(t)}))}onSelectChange(t){const e=t.target.value,s=this.getTabByNumber(e);s&&this.setSelectedTab(s,!1)}onKeydown(t){const e=t.currentTarget;let s=!1;switch(t.key){case"ArrowLeft":this.setSelectedToPreviousTab(e),s=!0;break;case"ArrowRight":this.setSelectedToNextTab(e),s=!0;break;case"Home":this.setSelectedTab(this.firstTab),s=!0;break;case"End":this.setSelectedTab(this.lastTab),s=!0}s&&(t.stopPropagation(),t.preventDefault())}getCurrentTabIndex(){const t=this.tabs;for(let e=0;e<t.length;e++)if("true"===t[e].getAttribute("aria-selected"))return e;return-1}goTo(t){const e=this.tabs;t>0&&t<=e.length?this.setSelectedTab(e[t-1]):console.error("Invalid tab index")}onClick(t){this.setSelectedTab(t.currentTarget)}}window.pulsarBlocks=window.pulsarBlocks||{},window.pulsarBlocks.tabs=new Map,window.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll(".wp-block-pulsar-tabs").forEach((e=>{const s=e.getAttribute("data-tabs-id");window.pulsarBlocks.tabs.set(s,new t(e))}))}))})();